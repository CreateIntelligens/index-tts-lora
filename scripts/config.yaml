# Extract 特徵提取配置
# 位置: scripts/config.yaml
# 修改此文件後，直接執行 ./run.sh prepare 和 ./run.sh extract 即可使用新配置

# === Prepare 配置 ===
split_size: 100000    # 自動分割大小（每個 part 的行數）
                      # 建議: 50000-100000（數值越小，part 越多，適合更多 GPU）
                      # 設為 0 則不分割

# === Extract 配置 ===
# 批次處理配置
batch_size: 16        # 批次大小（建議: 16-64，根據 GPU 記憶體調整）
num_workers: 8        # DataLoader worker 數量（建議: 8-16）

# Medoid 計算配置
# 注意: Medoid 使用分批計算，會計算所有數據（不採樣，完全精確）
medoid_batch_size: 10000   # 每次計算多少行（建議 500-2000）
medoid_chunk_size: 20000   # 每個列分塊大小（建議 1000-3000）
                          # GPU 記憶體使用 ≈ batch_size × chunk_size × 4 bytes
                          # 例如 1000×2000 ≈ 8MB（很安全）
                          # 數值越大越快，但需要更多 GPU 記憶體

# GPU 配置（可選）
# gpus: 0,1,2,3       # 指定使用的 GPU 編號（留空或註解則使用默認 GPU 0-3）
                      # 範例: gpus: 4,5,6,7  (使用 GPU 4-7)
                      # 範例: gpus: 0        (只用 GPU 0)
